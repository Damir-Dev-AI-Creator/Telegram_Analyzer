# üîí HTTPS Setup –¥–ª—è Telegram Mini App

Telegram —Ç—Ä–µ–±—É–µ—Ç **HTTPS** –¥–ª—è Mini Apps. –õ–æ–∫–∞–ª—å–Ω—ã–π `http://localhost` –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç.

## üéØ –ë—ã—Å—Ç—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ —Å ngrok

### –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ ngrok

**macOS:**
```bash
brew install ngrok
```

**Linux:**
```bash
# –°–∫–∞—á–∞–π—Ç–µ —Å https://ngrok.com/download
wget https://bin.equinox.io/c/bNyj1mQVY4c/ngrok-v3-stable-linux-amd64.tgz
tar xvzf ngrok-v3-stable-linux-amd64.tgz
sudo mv ngrok /usr/local/bin/
```

**Windows:**
–°–∫–∞—á–∞–π—Ç–µ —Å https://ngrok.com/download –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ

### –®–∞–≥ 2: –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å

1. –°–æ–∑–¥–∞–π—Ç–µ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç: https://dashboard.ngrok.com/signup
2. –ü–æ–ª—É—á–∏—Ç–µ authtoken: https://dashboard.ngrok.com/get-started/your-authtoken
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ:
   ```bash
   ngrok config add-authtoken YOUR_AUTH_TOKEN
   ```

### –®–∞–≥ 3: –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å ngrok

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–ø–æ—Å–æ–± (Linux/macOS):**
```bash
cd telegram_bot
./start_with_ngrok.sh
```

**–†—É—á–Ω–æ–π —Å–ø–æ—Å–æ–±:**

–û—Ç–∫—Ä–æ–π—Ç–µ **4 —Ç–µ—Ä–º–∏–Ω–∞–ª–∞**:

**Terminal 1 - Backend:**
```bash
cd telegram_bot
python -m uvicorn backend.api:app --reload --port 8000
```

**Terminal 2 - Frontend:**
```bash
cd telegram_bot/frontend
npm run dev
```

**Terminal 3 - ngrok –¥–ª—è Frontend:**
```bash
ngrok http 3000
```
–°–∫–æ–ø–∏—Ä—É–π—Ç–µ HTTPS URL (–Ω–∞–ø—Ä–∏–º–µ—Ä: `https://abc123.ngrok.io`)

**Terminal 4 - ngrok –¥–ª—è Backend:**
```bash
ngrok http 8000
```
–°–∫–æ–ø–∏—Ä—É–π—Ç–µ HTTPS URL (–Ω–∞–ø—Ä–∏–º–µ—Ä: `https://def456.ngrok.io`)

### –®–∞–≥ 4: –û–±–Ω–æ–≤–∏—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

**–í `telegram_bot/.env`:**
```env
TELEGRAM_BOT_TOKEN=your_bot_token
WEBAPP_URL=https://abc123.ngrok.io      # Frontend ngrok URL
API_URL=https://def456.ngrok.io          # Backend ngrok URL
```

**–°–æ–∑–¥–∞–π—Ç–µ `telegram_bot/frontend/.env`:**
```env
VITE_API_URL=https://def456.ngrok.io
```

### –®–∞–≥ 5: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Frontend

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Frontend (Ctrl+C –≤ Terminal 2)
cd telegram_bot/frontend
npm run dev
```

### –®–∞–≥ 6: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ BotFather

1. –û—Ç–∫—Ä–æ–π—Ç–µ @BotFather –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/newapp`
3. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞
4. –í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ
5. **URL:** `https://abc123.ngrok.io` (Frontend URL)
6. –ó–∞–≤–µ—Ä—à–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫—É

### –®–∞–≥ 7: –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞

**Terminal 5:**
```bash
cd telegram_bot
python bot.py
```

### –®–∞–≥ 8: –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ!

1. –ù–∞–π–¥–∏—Ç–µ –±–æ—Ç–∞ –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start`
3. –ù–∞–∂–º–∏—Ç–µ "üöÄ –û—Ç–∫—Ä—ã—Ç—å Ysell Analyzer"
4. Mini App –¥–æ–ª–∂–µ–Ω –æ—Ç–∫—Ä—ã—Ç—å—Å—è! üéâ

---

## üîÑ –ü—Ä–∏ –∫–∞–∂–¥–æ–º –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ

‚ö†Ô∏è **–í–∞–∂–Ω–æ:** ngrok –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç **–Ω–æ–≤—ã–µ URLs** –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—É—Å–∫–µ (–Ω–∞ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–º –ø–ª–∞–Ω–µ).

–ü–æ—ç—Ç–æ–º—É –Ω—É–∂–Ω–æ:
1. –ü–æ–ª—É—á–∏—Ç—å –Ω–æ–≤—ã–µ ngrok URLs
2. –û–±–Ω–æ–≤–∏—Ç—å `.env` —Ñ–∞–π–ª—ã
3. –û–±–Ω–æ–≤–∏—Ç—å URL –≤ BotFather
4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Frontend –∏ Bot

### –†–µ—à–µ–Ω–∏–µ: –ü–æ—Å—Ç–æ—è–Ω–Ω—ã–π subdomain (–ø–ª–∞—Ç–Ω–æ)

ngrok Pro –ø–ª–∞–Ω ($8/–º–µ—Å) –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–π subdomain:

```bash
ngrok http 3000 --subdomain=my-analyzer
# URL –±—É–¥–µ—Ç –≤—Å–µ–≥–¥–∞: https://my-analyzer.ngrok.io
```

---

## üåê –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: Localtunnel (–±–µ—Å–ø–ª–∞—Ç–Ω–æ)

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞
npm install -g localtunnel

# –ó–∞–ø—É—Å–∫ –¥–ª—è Frontend (–≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ)
lt --port 3000 --subdomain my-analyzer-app

# –ó–∞–ø—É—Å–∫ –¥–ª—è Backend (–≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ)
lt --port 8000 --subdomain my-analyzer-api
```

URLs –±—É–¥—É—Ç:
- Frontend: `https://my-analyzer-app.loca.lt`
- Backend: `https://my-analyzer-api.loca.lt`

‚ö†Ô∏è –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –æ—Ç–∫—Ä—ã—Ç–∏–∏ localtunnel –º–æ–∂–µ—Ç –ø–æ–∫–∞–∑–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è.

---

## üöÄ –ü—Ä–æ–¥–∞–∫—à–µ–Ω —Ä–µ—à–µ–Ω–∏–µ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–î–ª—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ª—É—á—à–µ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º —Ö–æ—Å—Ç–∏–Ω–≥–µ:

### –í–∞—Ä–∏–∞–Ω—Ç 1: VPS (DigitalOcean, Hetzner, Linode)

- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –Ω–∞ Ubuntu/Debian —Å–µ—Ä–≤–µ—Ä
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Nginx —Å Let's Encrypt SSL
- –ü–æ–ª—É—á–∏—Ç–µ –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–π –¥–æ–º–µ–Ω
- –ü–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –≤ `README.md`

**–°—Ç–æ–∏–º–æ—Å—Ç—å:** ~$5-10/–º–µ—Å—è—Ü

### –í–∞—Ä–∏–∞–Ω—Ç 2: PaaS (Platform as a Service)

**Render.com (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):**
- –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ø–ª–∞–Ω –¥–æ—Å—Ç—É–ø–µ–Ω
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π HTTPS
- –ü—Ä–æ—Å—Ç–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –∏–∑ Git
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Docker

**Railway.app:**
- $5 –∫—Ä–µ–¥–∏—Ç –Ω–∞ —Å—Ç–∞—Ä—Ç–µ
- –û—á–µ–Ω—å –ø—Ä–æ—Å—Ç–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π HTTPS

**Fly.io:**
- –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π tier
- –ì–ª–æ–±–∞–ª—å–Ω–∞—è CDN
- Docker-based

---

## üìù Checklist

–î–ª—è —Ä–∞–±–æ—Ç—ã Mini App –Ω—É–∂–Ω–æ:

- ‚úÖ Backend –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ HTTPS
- ‚úÖ Frontend –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ HTTPS
- ‚úÖ Frontend –∑–Ω–∞–µ—Ç Backend URL (–≤ `.env`)
- ‚úÖ Bot –∑–Ω–∞–µ—Ç Frontend URL (–≤ `WEBAPP_URL`)
- ‚úÖ BotFather –Ω–∞—Å—Ç—Ä–æ–µ–Ω —Å Frontend URL
- ‚úÖ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –≤–∞–ª–∏–¥–Ω—ã (ngrok/localtunnel –¥–µ–ª–∞—é—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

---

## üêõ Troubleshooting

### "Please send me a valid URL. https is required"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ URL –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `https://`
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ ngrok –∑–∞–ø—É—â–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ URL –∞–∫—Ç—É–∞–ª—å–Ω—ã–π (–Ω–µ –∏—Å—Ç–µ–∫)

### Mini App –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ Backend URL –≤ `frontend/.env` –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
- –û—Ç–∫—Ä–æ–π—Ç–µ Developer Tools –≤ Telegram Desktop
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏

### Backend –æ—à–∏–±–∫–∏ 401
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ `TELEGRAM_BOT_TOKEN` –≤ `.env` –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —á–∞—Å—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã

### ngrok "Too many connections"
- –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ø–ª–∞–Ω –æ–≥—Ä–∞–Ω–∏—á–µ–Ω 40 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–ª–∞—Ç–Ω—ã–π –ø–ª–∞–Ω –∏–ª–∏ –ª–æ–∫–∞–ª—å–Ω—É—é —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É

---

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

–î–ª—è **—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏**: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ ngrok
–î–ª—è **–ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞**: —Ä–∞–∑–≤–µ—Ä–Ω–∏—Ç–µ –Ω–∞ VPS –∏–ª–∏ PaaS

–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Å ngrok —É–¥–æ–±–Ω–∞, –Ω–æ –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ª—É—á—à–µ —Å—Ä–∞–∑—É –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–æ–¥–∞–∫—à–µ–Ω –æ–∫—Ä—É–∂–µ–Ω–∏–µ.

---

–£–¥–∞—á–∏! üöÄ
